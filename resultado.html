<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Resultados</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="sass/custom.css">
    <link rel="icon" href="img/friendship.png">
    <script src="https://unpkg.com/gojs@2.2.10/release/go.js"></script>
    <style>
        body {
            background-image: url(img/aula.webp);
            background-repeat: no-repeat;
            background-size: cover;
        }
    </style>
</head>

<body>
    <div class="container-fluid">

        <!-- Header -->
        <div class="row">
            <div class="col-12 mt-2">
                <div class="alert bg-secondary text-center p-0" role="alert">
                    <h3 id="encabezado"><strong class="text-white">RESULTADOS</strong></h1>
                </div>
            </div>
        </div>

        <!-- Aqui deberían de ir los alumnos de la clase, hay que sacarlo de la base de datos y no lo sé hacer aún-->
        <div class="row">
            <div class="col-12 mt-2">
                <div class="alert bg-secondary text-center p-0" role="alert">
                    <span id="nombres"></span>
                </div>
            </div>
        </div>

        <!-- Formularios -->
        <div class="row ms-1 me-1">
            <!-- Formulario primera parte-->
            <div class="col-12 border formulario1">

                <div class="mb-3"><strong>RESPUESTAS DE LAS PREGUNTAS</strong></div>

                <!--Primera pregunta-->
                <div class="row g-3 align-items-center">
                    <div>
                        <label for="GustarCompaneros" class="form-label">
                            Imagina que cambiamos de clase, ¿qué tres compañeros te gustaría que fueran contigo?
                        </label>
                    </div>
                    <div class="row mb-3">
                        <!-- GRAFO -->
                        <div id="Contenido" class="w-full"> <!--Pading de 4 y el ancho todo -->
                            <div id="ejemplo">
                              <!-- El  DIV del gráfico necesita un tamaño explicito o no se verá nada colocamos un borde y el tamaño -->
                              <div id="myDiagramDiv"
                                style="border: 1px solid black; width: 100%; height: 450px; position: relative; -webkit-tap-highlight-color: rgb(246, 246, 162);">
                                <canvas tabindex="0" width="500" height="500"
                                  style="position: absolute; top: 0px; left: 0px; z-index: 2; user-select: none; touch-action: none; width: 398px; height: 398px;">
                                  Este texto se mostrará si tu navegador no soporta Canvas HTML.
                                </canvas>
                              </div>
                              <script id="code">
                                const myDiagram =
                                  new go.Diagram("myDiagramDiv",  // Crea un grafico en el Div myDiagramDiv
                                    { "undoManager.isEnabled": true });  // activamos el deshacer y rehacer.
                        
                                // Declaramos como serán los nodos del grafico
                                myDiagram.nodeTemplate =
                                  new go.Node("Auto")  // Será un rectangulo redondeado
                                    .add(new go.Shape("RoundedRectangle",
                                      { strokeWidth: 0, fill: "white" })  // Sin borde y el relleno por defecto es blanco
                                      .bind("fill", "color"))  // Indicamos que el color del nodo vendrá en el campo color del json
                                    .add(new go.TextBlock(
                                      { margin: 8, font: "bold 14px sans-serif", stroke: '#333' })  // Configuración del texto de los nodos
                                      .bind("text", "key"));  // El texto vendrá dentro del json en el campo key.
                       
                                // Los json con los alumnos, donde ponemos el key con el texto que aparecera y el color del nodo.
                                let alumnos =  [
                                    { key: "Ricardo", color: "lightblue" },
                                    { key: "Irene", color: "orange" },
                                    { key: "Gamma", color: "lightgreen" },
                                    { key: "Delta", color: "pink" },
                                     {key:  "Jose", color: "yellow"}
                                  ]
                                  // los json con las relaciones entre nodos
                                let relaciones =[
                                    { from: "Ricardo", to: "Irene" },
                                    { from: "Jose", to: "Gamma" },
                                    { from: "Ricardo", to: "Delta" },
                                    { from: "Gamma", to: "Delta" },
                                    { from: "Delta", to: "Alpha" },
                                    { from: "Ricardo", to: "Gamma" },
                                    { form: "Jose", to: "Gamma"}
                                  ]
                                myDiagram.model = new go.GraphLinksModel( alumnos,relaciones);
                              </script>
                        </div>
                    </div>
                </div>

                <!-- Segunda pregunta-->
                <div class="row g-3 align-items-center">
                    <div>
                        <label for="GustarCompaneros" class="form-label">
                            ¿Qué tres compañeros crees que te habrían elegido a ti para cambiar de clase?
                        </label>
                    </div>
                    <div class="row mb-3">
                       <!-- GRAFO -->
                       <div id="Contenido" class="w-full"> <!--Pading de 4 y el ancho todo -->
                        <div id="ejemplo">
                          <!-- El  DIV del gráfico necesita un tamaño explicito o no se verá nada colocamos un borde y el tamaño -->
                          <div id="myDiagramDiv2"
                            style="border: 1px solid black; width: 100%; height: 450px; position: relative; -webkit-tap-highlight-color: rgb(246, 246, 162);">
                            <canvas tabindex="0" width="500" height="500"
                              style="position: absolute; top: 0px; left: 0px; z-index: 2; user-select: none; touch-action: none; width: 398px; height: 398px;">
                              Este texto se mostrará si tu navegador no soporta Canvas HTML.
                            </canvas>
                          </div>
                          <script id="code">
                            const myDiagram2 =
                              new go.Diagram("myDiagramDiv2",  // Crea un grafico en el Div myDiagramDiv2
                                { "undoManager.isEnabled": true });  // activamos el deshacer y rehacer.
                    
                            // Declaramos como serán los nodos del grafico
                            myDiagram2.nodeTemplate =
                              new go.Node("Auto")  // Será un rectangulo redondeado
                                .add(new go.Shape("RoundedRectangle",
                                  { strokeWidth: 0, fill: "white" })  // Sin borde y el relleno por defecto es blanco
                                  .bind("fill", "color"))  // Indicamos que el color del nodo vendrá en el campo color del json
                                .add(new go.TextBlock(
                                  { margin: 8, font: "bold 14px sans-serif", stroke: '#333' })  // Configuración del texto de los nodos
                                  .bind("text", "key"));  // El texto vendrá dentro del json en el campo key.
                   
                            // Los json con los alumnos, donde ponemos el key con el texto que aparecera y el color del nodo.
                            let alumnos2 =  [
                                { key: "Ricardo", color: "lightblue" },
                                { key: "Irene", color: "orange" },
                                { key: "Gamma", color: "lightgreen" },
                                { key: "Delta", color: "pink" },
                                 {key:  "Jose", color: "yellow"}
                              ]
                              // los json con las relaciones entre nodos
                            let relaciones2 =[
                                { from: "Ricardo", to: "Irene" },
                                { from: "Jose", to: "Gamma" },
                                { from: "Ricardo", to: "Delta" },
                                { from: "Gamma", to: "Delta" },
                                { from: "Delta", to: "Alpha" },
                                { from: "Ricardo", to: "Gamma" },
                                { form: "Jose", to: "Gamma"}
                              ]
                            myDiagram2.model = new go.GraphLinksModel( alumnos2,relaciones2);
                          </script>
                        </div>
                    </div>
                </div>

                <!--Tercera  pregunta-->
                <div class="row g-3 align-items-center">
                    <div>
                        <label for="GustarCompaneros" class="form-label">
                            ¿Qué tres compañeros crees que no te habrían elegido para esa clase?
                        </label>
                    </div>
                    <div class="row mb-3">
                        <!-- GRAFO -->
                       <div id="Contenido" class="w-full"> <!--Pading de 4 y el ancho todo -->
                        <div id="ejemplo">
                          <!-- El  DIV del gráfico necesita un tamaño explicito o no se verá nada colocamos un borde y el tamaño -->
                          <div id="myDiagramDiv3"
                            style="border: 1px solid black; width: 100%; height: 450px; position: relative; -webkit-tap-highlight-color: rgb(246, 246, 162);">
                            <canvas tabindex="0" width="500" height="500"
                              style="position: absolute; top: 0px; left: 0px; z-index: 2; user-select: none; touch-action: none; width: 398px; height: 398px;">
                              Este texto se mostrará si tu navegador no soporta Canvas HTML.
                            </canvas>
                          </div>
                          <script id="code">
                            const myDiagram3 =
                              new go.Diagram("myDiagramDiv3",  // Crea un grafico en el Div myDiagramDiv3
                                { "undoManager.isEnabled": true });  // activamos el deshacer y rehacer.
                    
                            // Declaramos como serán los nodos del grafico
                            myDiagram3.nodeTemplate =
                              new go.Node("Auto")  // Será un rectangulo redondeado
                                .add(new go.Shape("RoundedRectangle",
                                  { strokeWidth: 0, fill: "white" })  // Sin borde y el relleno por defecto es blanco
                                  .bind("fill", "color"))  // Indicamos que el color del nodo vendrá en el campo color del json
                                .add(new go.TextBlock(
                                  { margin: 8, font: "bold 14px sans-serif", stroke: '#333' })  // Configuración del texto de los nodos
                                  .bind("text", "key"));  // El texto vendrá dentro del json en el campo key.
                   
                            // Los json con los alumnos, donde ponemos el key con el texto que aparecera y el color del nodo.
                            let alumnos3 =  [
                                { key: "Ricardo", color: "lightblue" },
                                { key: "Irene", color: "orange" },
                                { key: "Gamma", color: "lightgreen" },
                                { key: "Delta", color: "pink" },
                                 {key:  "Jose", color: "yellow"}
                              ]
                              // los json con las relaciones entre nodos
                            let relaciones3 =[
                                { from: "Ricardo", to: "Irene" },
                                { from: "Jose", to: "Gamma" },
                                { from: "Ricardo", to: "Delta" },
                                { from: "Gamma", to: "Delta" },
                                { from: "Delta", to: "Alpha" },
                                { from: "Ricardo", to: "Gamma" },
                                { form: "Jose", to: "Gamma"}
                              ]
                            myDiagram3.model = new go.GraphLinksModel( alumnos3,relaciones3);
                          </script>
                        </div>
                    </div>
                </div>

                <!-- Cuarta pregunta-->
                <div class="row g-3 align-items-center">
                    <div>
                        <label for="GustarCompaneros" class="form-label">
                            ¿Qué compañeros preferirías que no fueran a esa clase?
                        </label>
                    </div>
                    <div class="row mb-3">
                        <!-- GRAFO -->
                       <div id="Contenido" class="w-full"> <!--Pading de 4 y el ancho todo -->
                        <div id="ejemplo">
                          <!-- El  DIV del gráfico necesita un tamaño explicito o no se verá nada colocamos un borde y el tamaño -->
                          <div id="myDiagramDiv4"
                            style="border: 1px solid black; width: 100%; height: 450px; position: relative; -webkit-tap-highlight-color: rgb(246, 246, 162);">
                            <canvas tabindex="0" width="500" height="500"
                              style="position: absolute; top: 0px; left: 0px; z-index: 2; user-select: none; touch-action: none; width: 398px; height: 398px;">
                              Este texto se mostrará si tu navegador no soporta Canvas HTML.
                            </canvas>
                          </div>
                          <script id="code">
                            const myDiagram4 =
                              new go.Diagram("myDiagramDiv4",  // Crea un grafico en el Div myDiagramDiv4
                                { "undoManager.isEnabled": true });  // activamos el deshacer y rehacer.
                    
                            // Declaramos como serán los nodos del grafico
                            myDiagram4.nodeTemplate =
                              new go.Node("Auto")  // Será un rectangulo redondeado
                                .add(new go.Shape("RoundedRectangle",
                                  { strokeWidth: 0, fill: "white" })  // Sin borde y el relleno por defecto es blanco
                                  .bind("fill", "color"))  // Indicamos que el color del nodo vendrá en el campo color del json
                                .add(new go.TextBlock(
                                  { margin: 8, font: "bold 14px sans-serif", stroke: '#333' })  // Configuración del texto de los nodos
                                  .bind("text", "key"));  // El texto vendrá dentro del json en el campo key.
                   
                            // Los json con los alumnos, donde ponemos el key con el texto que aparecera y el color del nodo.
                            let alumnos4 =  [
                                { key: "Ricardo", color: "lightblue" },
                                { key: "Irene", color: "orange" },
                                { key: "Gamma", color: "lightgreen" },
                                { key: "Delta", color: "pink" },
                                 {key:  "Jose", color: "yellow"}
                              ]
                              // los json con las relaciones entre nodos
                            let relaciones4 =[
                                { from: "Ricardo", to: "Irene" },
                                { from: "Jose", to: "Gamma" },
                                { from: "Ricardo", to: "Delta" },
                                { from: "Gamma", to: "Delta" },
                                { from: "Delta", to: "Alpha" },
                                { from: "Ricardo", to: "Gamma" },
                                { form: "Jose", to: "Gamma"}
                              ]
                            myDiagram4.model = new go.GraphLinksModel( alumnos4,relaciones4);
                          </script>
                        </div>
                    </div>
                </div>

            </div>

            <!-- Formulario segunda parte-->
            <div class="col-12 border formulario2">

                <!-- Primera pregunta-->
                <div class="row g-3 align-items-center">
                    <div>
                        <label for="GustarCompaneros" class="form-label">
                            ¿Crees que hay compañeros de tu clase que lo están pasando mal?
                        </label>
                    </div>
                    <div class="row">
                        <!-- HABRÁ UNA TARJETA POR RESPUESTA -->
                        <div class="col-auto">
                          <div class="card text-white bg-primary mb-3" style="max-width: 18rem;">
                            <div class="card-header">Nombre alumno que responde</div>
                            <div class="card-body">
                              <h5 class="card-title">Respusta nombres</h5>
                              <p class="card-text">Motivo</p>
                            </div>
                          </div>
                        </div>
                    </div>
                </div>

                <!-- Segunda pregunta-->
                <div class="row g-3 align-items-center">
                  <div>
                      <label for="GustarCompaneros" class="form-label">
                          Lo que más te gusta del Instituto es...
                      </label>
                  </div>
                  <div class="row">
                    <!-- HABRÁ UNA TARJETA POR RESPUESTA -->
                    <div class="col-auto">
                      <div class="card text-white bg-success mb-3" style="max-width: 18rem;">
                        <div class="card-header">Nombre alumno que responde</div>
                        <div class="card-body">
                          <h5 class="card-title">Respusta nombres</h5>
                          <p class="card-text">Motivo</p>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Tercera pregunta-->
                <div class="row g-3 align-items-center mb-5">
                  <div>
                      <label for="GustarCompaneros" class="form-label">
                          Y lo que menos te gusta...
                      </label>
                  </div>
                  <div class="row mb-5">
                    <!-- HABRÁ UNA TARJETA POR RESPUESTA -->
                    <div class="col-auto">
                      <div class="card text-white bg-danger mb-3" style="max-width: 18rem;">
                        <div class="card-header">Nombre alumno que responde</div>
                        <div class="card-body">
                          <h5 class="card-title">Respusta nombres</h5>
                          <p class="card-text">Motivo</p>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                
            </div>
        </div>

        <!-- Footer -->
        <div class="row footer">
            <div class="col-12 mt-3">
                <div class="alert bg-secondary text-center p-4" role="alert">
                    <i class="bi bi-whatsapp text-white m-2"></i>
                    <i class="bi bi-twitch text-white m-2"></i>
                    <i class="bi bi-twitter text-white m-2"></i>
                    <i class="bi bi-snapchat text-white m-2"></i>
                </div>
            </div>
        </div>
    </div>

    <script id="code">
      const myDiagram =
        new go.Diagram("myDiagramDiv",  // Crea un grafico en el Div myDiagramDiv
          { "undoManager.isEnabled": true });  // activamos el deshacer y rehacer.

      // Declaramos como serán los nodos del grafico
      myDiagram.nodeTemplate =
        new go.Node("Auto")  // Será un rectangulo redondeado
          .add(new go.Shape("RoundedRectangle",
            { strokeWidth: 0, fill: "white" })  // Sin borde y el relleno por defecto es blanco
            .bind("fill", "color"))  // Indicamos que el color del nodo vendrá en el campo color del json
          .add(new go.TextBlock(
            { margin: 8, font: "bold 14px sans-serif", stroke: '#333' })  // Configuración del texto de los nodos
            .bind("text", "key"));  // El texto vendrá dentro del json en el campo key.


      
      const obtenerColorPastelAleatorio = () => {
        const h = obtenerNumeroAleatorio(360);

        return `hsl(${h}deg, 90%, 90%)`;
      };

      const obtenerNumeroAleatorio = (maxNum) => {
        return Math.floor(Math.random() * maxNum);
      };

      let unos = crearAlumnos(['Ricardo', "Jose", "Lucia", "Manuel", "Solo", "Juan"])

      //Función que crea el json con los nombres de los alumnos para pintarlos en la grafica
      //Desde un array pasado como parametro
      function crearAlumnos(alumnos) {
        let todos = []
        let alumno = {}

        for (a of alumnos) {
          alumno = {}
          alumno.key = a
          alumno.color = obtenerColorPastelAleatorio()
          todos.push(alumno)
        }
        console.log(todos)
        return (todos)
      }


      // Array de objetos para crear las relaciones
      let rel = crearRelaciones([
        { nombre: "Ricardo", relacion: ["Jose", "Lucia", "Manuel"] },
        { nombre: "Jose", relacion: ["Lucia", "Solo", "Manuel"] },
        { nombre: "Juan", relacion: ["Lucia", "Solo", "Ricardo"] },
        { nombre: "Manuel", relacion: ["Juan", "Lucia", "Ricardo"] }
      ])
      
      // Función que le pasamos las relaciones entre un alumnos y tres más
      //Crea el json para crear el objeto que entiende gojs
      
      function crearRelaciones(relaciones) {
        let todos = []
        let relacion = {}

        for (a of relaciones) {
          for (r of a.relacion) {
            relacion = {}
            relacion.from = a.nombre
            relacion.to = r
            todos.push(relacion)
            console.log(relacion)
          }
        }
        return todos
      }
     
   

      //Cambiamos el tipo de distribución de los nodos en la presentación
      myDiagram.layout = new go.ForceDirectedLayout;
      //Pintamos la presentación
      myDiagram.model = new go.GraphLinksModel(unos, rel);


      // Los json con los alumnos, donde ponemos el key con el texto que aparecera y el color del nodo.
      /* let alumnos = [
        { key: "Ricardo", color: "lightblue" },
        { key: "Jose", color: "orange" },
        { key: "Manuel", color: "lightgreen" },
        { key: "Delta", color: "pink" },
        { key: "Lucia", color: "yellow" }
      ]
      // los json con las relaciones entre nodos
      let relaciones = [
        { from: "Ricardo", to: "Jose" },
        { from: "Ricardo", to: "Manuel" },
        { from: "Ricardo", to: "Lucia" }
      ] */

    </script>
</body>

</html>